# yaml config for powermon
devices:
  - name: Test_Inverter
    serial_number: 123456789
    model: 8048MAX
    manufacturer: MPP-Solar
    port:
      # baud: 2400
      # path: /dev/ttyUSB0
      type: test
      protocol: PI30MAX
    instructions:
    # - command: f'QED{dateparse("yesterday").strftime("%Y%m%d")}'
    #   type: templated
    #   trigger:
    #     every: 1
    #   outputs:
    #   - type: screen
    #     format:
    #       type: hass
    #       tag: Test_Inverter
    #       filter: ^pv
    - command: f'QED{dateparse("today").strftime("%Y%m%d")}'
      type: template
      override: 
        description: 
          pv_generated_energy_for_day: todays_energy
      trigger:
        every: 1
      outputs:
      - type: screen
        format:
          type: table
          tag: Test_Inverter
          # filter: ^pv

loop: null

mqttbroker:
  name: homeassistant.lan
  port: 1883
  username: null
  password: null
  # adhoc_commands:
  #   topic: Test_Inverter/commands
  #   outputs:
  #   - name: screen
  #     tag: Test_Inverter