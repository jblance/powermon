<html>
<head>
    <title>Powermon Home</title>
    <link href="static/styles.css" rel="stylesheet">
    <link href="static/favicon.ico" rel="icon" type="image/x-icon">
</head>
<body>
{% if config %}
    <h1>Powermon Api</h1>
    config file: {{ config['configFile'] }}
    <h2>Web Server Configuration</h2>
    {% if 'api' in config %}
        <ul>
            {% for key in config['api'] %}
                <li>{{ key }}: {{ config['api'][key] }}</li>
            {% endfor %}
        </ul>
        <p></p>
    {% else %}
        <p>No config found</p>
    {% endif %}
    <h2>MQTT Broker Configuration</h2>
    {% if 'mqttbroker' in config %}
        <ul>
            {% for key in config['mqttbroker'] %}
                <li>{{ key }}: {{ config['mqttbroker'][key] }}</li>
            {% endfor %}
        </ul>
        <p></p>
    {% else %}
        <p>No mqtt config found</p>
    {% endif %}
{% else %}
    <p>No config found</p>
{% endif %}
{% if announce %}
    <h2>announce</h2>
        <ul>
            <li><strong>device info:</strong></li>
            <ul>
            {% for key, value in announce['device_info'].items() %}
                <li><strong>{{ key }}:</strong> {{ value }}</li>
            {% endfor %}
            </ul>
            <li><strong>port:</strong></li>
            <ul>
            {% for key, value in announce['port'].items() %}
                <li><strong>{{ key }}:</strong> {{ value }}</li>
            {% endfor %}
            </ul>
            <li><strong>commands:</strong></li>
            <ul>
            {% for item in announce['commands'] %}
                <li>{{ item }}</li>
            {% endfor %}
            </ul>
        </ul>
{% endif %}
{% if results %}
    <h2>results</h2>
    <ul>
    {% for topic, item in results %}
        <li><strong>{{ topic }}:</strong> {{ item }}</li>
    {% endfor %}
    </ul>
{% endif %}
</body>
</html>

{# TODO: https://gomakethings.com/four-different-ways-to-inject-text-and-html-into-an-element-with-vanilla-javascript/ #}